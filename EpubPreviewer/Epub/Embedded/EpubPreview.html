<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>{{title}}</title>
	<link href="EpubPreview.css" rel="stylesheet"/>
	<link href="EpubPreviewer.css" rel="stylesheet"/>
</head>
<body>
<div class="container">
	<div class="toc" id="toc">
		<h1>{{title}}</h1>
		<h2>{{author}}</h2>
		{{toc}}
		<script>
			var path = "{{path}}";

			var elements = document.getElementsByTagName("a");
			for (var i = 0; i < elements.length; i++) {
				var element = elements[i];

				element.addEventListener("click",
					function(event) {
						event.preventDefault();
						var file = "file://" + path + "/" + this.getAttribute("href");
						document.getElementById("ifr").getAttributeNode("src").value = file;

						var hl = document.getElementsByClassName("highlight");
						while(hl.length > 0){
							hl[0].classList.remove("highlight");
						}

						this.classList.add("highlight");

						return false;
					});
			}
		</script>
	</div>
	<div class="frame">
		<iframe src="{{framesrc}}" scrolling="auto", marginheight="10" marginwidth="10" id="ifr"></iframe>
	</div>
</div>
</body>
</html>